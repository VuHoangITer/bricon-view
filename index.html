<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TV Slideshow</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        overflow: hidden;
        background: #000;
      }

      .slideshow-container {
        position: relative;
        width: 100vw;
        height: 100vh;
        background: #000;
      }

      .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: none;
      }

      .slide.active {
        display: block;
      }

      .slide img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: #000;
      }

      /* Progress bar */
      .progress-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        height: 5px;
        background: rgba(255, 255, 255, 0.9);
        width: 0%;
        z-index: 1000;
      }

      /* Loading indicator */
      .loading {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 2rem;
        font-family: Arial, sans-serif;
        z-index: 999;
      }

      /* Slide counter */
      .counter {
        position: fixed;
        top: 30px;
        right: 30px;
        font-size: 2rem;
        color: white;
        font-family: Arial, sans-serif;
        background: rgba(0, 0, 0, 0.5);
        padding: 10px 20px;
        border-radius: 10px;
        z-index: 100;
      }
    </style>
  </head>
  <body>
    <div class="slideshow-container" id="slideshow">
      <!-- Slide 1 -->
      <div class="slide active">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1769508914/enterprise/blogs/blog/keo-cha-ron-epoxy-bricon-20260127171512.png"
          alt="Slide 1"
        />
      </div>

      <!-- Slide 2 -->
      <div class="slide">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1760768516/enterprise/categories/duan/du-an-dream-city6-20251018062156.webp"
          alt="Slide 2"
        />
      </div>

      <!-- Slide 3 -->
      <div class="slide">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1760768517/enterprise/categories/duan/du-an-novaworld-phan-thiet7-20251018062157.webp"
          alt="Slide 3"
        />
      </div>

      <!-- Slide 4 -->
      <div class="slide">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1760772648/enterprise/categories/duan/du-an-to-hop-trung-tam-thuong-mai-va-khach-san-hoa-20251018073046.webp"
          alt="Slide 4"
        />
      </div>

      <!-- Slide 5 -->
      <div class="slide">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1760768526/enterprise/categories/duan/toa-nha-cau-lac-bo-golf-da-lat19-20251018062206.webp"
          alt="Slide 5"
        />
      </div>

      <!-- Slide 6 -->
      <div class="slide">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1760768525/enterprise/categories/duan/swanbay-dai-phuoc15-20251018062205.webp"
          alt="Slide 6"
        />
      </div>

      <!-- Slide 7 -->
      <div class="slide">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1760768520/enterprise/categories/duan/khu-du-lich-bien-blue-sapphire-resort18-20251018062200.webp"
          alt="Slide 7"
        />
      </div>

      <!-- Slide 8 -->
      <div class="slide">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1760768518/enterprise/categories/duan/du-an-vinhome-golden-river-ba-son8-20251018062158.webp"
          alt="Slide 8"
        />
      </div>

      <!-- Slide 9 -->
      <div class="slide">
        <img
          src="https://res.cloudinary.com/dsslzfmqr/image/upload/v1760768523/enterprise/categories/duan/pullman-saigon-centre-tp-hcm12-20251018062203.webp"
          alt="Slide 9"
        />
      </div>
    </div>

    <!-- Progress bar -->
    <div class="progress-bar" id="progressBar"></div>

    <script>
      // Variables
      var currentSlide = 0;
      var slides = document.querySelectorAll(".slide");
      var totalSlides = slides.length;
      var slideInterval = 5000; // 5 seconds
      var progressBar = document.getElementById("progressBar");
      var counter = document.getElementById("counter");
      var loading = document.getElementById("loading");
      var progressWidth = 0;
      var progressTimer;
      var slideTimer;
      var imagesLoaded = 0;

      console.log("Total slides:", totalSlides);

      // Preload all images
      var images = document.querySelectorAll(".slide img");
      for (var i = 0; i < images.length; i++) {
        images[i].onload = function () {
          imagesLoaded++;
          console.log("Image loaded:", imagesLoaded, "/", totalSlides);
          if (imagesLoaded === totalSlides) {
            loading.style.display = "none";
            counter.style.display = "block";
            startSlideshow();
          }
        };
        images[i].onerror = function () {
          imagesLoaded++;
          console.log("Image error:", imagesLoaded, "/", totalSlides);
          if (imagesLoaded === totalSlides) {
            loading.style.display = "none";
            counter.style.display = "block";
            startSlideshow();
          }
        };
      }

      // Fallback: start after 3 seconds even if images not loaded
      setTimeout(function () {
        if (imagesLoaded < totalSlides) {
          console.log("Force start slideshow");
          loading.style.display = "none";
          counter.style.display = "block";
          startSlideshow();
        }
      }, 3000);

      function updateCounter() {
        counter.textContent = currentSlide + 1 + "/" + totalSlides;
      }

      function updateProgressBar() {
        progressWidth += 2; // Increase by 2% every 100ms (100ms * 50 = 5000ms)
        if (progressWidth > 100) {
          progressWidth = 100;
        }
        progressBar.style.width = progressWidth + "%";
      }

      function resetProgress() {
        progressWidth = 0;
        progressBar.style.width = "0%";
        clearInterval(progressTimer);
        progressTimer = setInterval(updateProgressBar, 100);
      }

      function showSlide(index) {
        console.log("Showing slide:", index);

        // Hide all slides
        for (var i = 0; i < slides.length; i++) {
          slides[i].classList.remove("active");
        }

        // Show current slide
        slides[index].classList.add("active");

        // Update counter
        updateCounter();

        // Reset progress bar
        resetProgress();
      }

      function nextSlide() {
        currentSlide++;
        if (currentSlide >= totalSlides) {
          currentSlide = 0;
        }
        showSlide(currentSlide);
      }

      function startSlideshow() {
        console.log("Starting slideshow");
        updateCounter();
        resetProgress();

        // Start auto-advance
        slideTimer = setInterval(nextSlide, slideInterval);

        console.log("Slideshow started!");
      }

      // Click to advance
      document.addEventListener("click", function () {
        console.log("Click detected");
        clearInterval(slideTimer);
        nextSlide();
        slideTimer = setInterval(nextSlide, slideInterval);
      });

      // Keyboard navigation
      document.addEventListener("keydown", function (e) {
        if (e.keyCode === 39 || e.keyCode === 32) {
          // Right arrow or Space
          clearInterval(slideTimer);
          nextSlide();
          slideTimer = setInterval(nextSlide, slideInterval);
        } else if (e.keyCode === 37) {
          // Left arrow
          clearInterval(slideTimer);
          currentSlide--;
          if (currentSlide < 0) {
            currentSlide = totalSlides - 1;
          }
          showSlide(currentSlide);
          slideTimer = setInterval(nextSlide, slideInterval);
        }
      });

      // Debug info
      console.log("Script loaded successfully");
      console.log("Slides found:", slides.length);
    </script>
  </body>
</html>
